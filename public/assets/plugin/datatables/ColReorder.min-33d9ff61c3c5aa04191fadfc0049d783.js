!function(t,e,o){function s(t){for(var e=[],o=0,s=t.length;s>o;o++)e[t[o]]=o;return e}function n(t,e,o){e=t.splice(e,1)[0],t.splice(o,0,e)}function a(t,e,o){for(var s=[],n=0,a=t.childNodes.length;a>n;n++)1==t.childNodes[n].nodeType&&s.push(t.childNodes[n]);e=s[e],null!==o?t.insertBefore(e,s[o]):t.appendChild(e)}t.fn.dataTableExt.oApi.fnColReorder=function(e,o,i){var r,d,l,h,f,u=e.aoColumns.length;if(o!=i)if(0>o||o>=u)this.oApi._fnLog(e,1,"ColReorder 'from' index is out of bounds: "+o);else if(0>i||i>=u)this.oApi._fnLog(e,1,"ColReorder 'to' index is out of bounds: "+i);else{var g=[];for(r=0,d=u;d>r;r++)g[r]=r;for(n(g,o,i),g=s(g),r=0,d=e.aaSorting.length;d>r;r++)e.aaSorting[r][0]=g[e.aaSorting[r][0]];if(null!==e.aaSortingFixed)for(r=0,d=e.aaSortingFixed.length;d>r;r++)e.aaSortingFixed[r][0]=g[e.aaSortingFixed[r][0]];for(r=0,d=u;d>r;r++)for(f=e.aoColumns[r],l=0,h=f.aDataSort.length;h>l;l++)f.aDataSort[l]=g[f.aDataSort[l]];for(r=0,d=u;d>r;r++)f=e.aoColumns[r],"number"==typeof f.mData&&(f.mData=g[f.mData],f.fnGetData=e.oApi._fnGetObjectDataFn(f.mData),f.fnSetData=e.oApi._fnSetObjectDataFn(f.mData));if(e.aoColumns[o].bVisible){for(h=this.oApi._fnColumnIndexToVisible(e,o),f=null,r=o>i?i:i+1;null===f&&u>r;)f=this.oApi._fnColumnIndexToVisible(e,r),r++;for(l=e.nTHead.getElementsByTagName("tr"),r=0,d=l.length;d>r;r++)a(l[r],h,f);if(null!==e.nTFoot)for(l=e.nTFoot.getElementsByTagName("tr"),r=0,d=l.length;d>r;r++)a(l[r],h,f);for(r=0,d=e.aoData.length;d>r;r++)null!==e.aoData[r].nTr&&a(e.aoData[r].nTr,h,f)}for(n(e.aoColumns,o,i),n(e.aoPreSearchCols,o,i),r=0,d=e.aoData.length;d>r;r++)t.isArray(e.aoData[r]._aData)&&n(e.aoData[r]._aData,o,i),n(e.aoData[r]._anHidden,o,i);for(r=0,d=e.aoHeader.length;d>r;r++)n(e.aoHeader[r],o,i);if(null!==e.aoFooter)for(r=0,d=e.aoFooter.length;d>r;r++)n(e.aoFooter[r],o,i);for(r=0,d=u;d>r;r++)t(e.aoColumns[r].nTh).unbind("click"),this.oApi._fnSortAttachListener(e,e.aoColumns[r].nTh,r);t(e.oInstance).trigger("column-reorder",[e,{iFrom:o,iTo:i,aiInvertMapping:g}]),"undefined"!=typeof e.oInstance._oPluginFixedHeader&&e.oInstance._oPluginFixedHeader.fnUpdate()}},ColReorder=function(t,e){return(!this.CLASS||"ColReorder"!=this.CLASS)&&alert("Warning: ColReorder must be initialised with the keyword 'new'"),"undefined"==typeof e&&(e={}),this.s={dt:null,init:e,fixed:0,dropCallback:null,mouse:{startX:-1,startY:-1,offsetX:-1,offsetY:-1,target:-1,targetIndex:-1,fromIndex:-1},aoTargets:[]},this.dom={drag:null,pointer:null},this.s.dt=t.oInstance.fnSettings(),this._fnConstruct(),t.oApi._fnCallbackReg(t,"aoDestroyCallback",jQuery.proxy(this._fnDestroy,this),"ColReorder"),ColReorder.aoInstances.push(this),this},ColReorder.prototype={fnReset:function(){for(var t=[],e=0,o=this.s.dt.aoColumns.length;o>e;e++)t.push(this.s.dt.aoColumns[e]._ColReorder_iOrigCol);this._fnOrderColumns(t)},_fnConstruct:function(){var t,e,o=this;for("undefined"!=typeof this.s.init.iFixedColumns&&(this.s.fixed=this.s.init.iFixedColumns),"undefined"!=typeof this.s.init.fnReorderCallback&&(this.s.dropCallback=this.s.init.fnReorderCallback),t=0,e=this.s.dt.aoColumns.length;e>t;t++)t>this.s.fixed-1&&this._fnMouseListener(t,this.s.dt.aoColumns[t].nTh),this.s.dt.aoColumns[t]._ColReorder_iOrigCol=t;this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(t,e){o._fnStateSave.call(o,e)},"ColReorder_State");var n=null;if("undefined"!=typeof this.s.init.aiOrder&&(n=this.s.init.aiOrder.slice()),this.s.dt.oLoadedState&&"undefined"!=typeof this.s.dt.oLoadedState.ColReorder&&this.s.dt.oLoadedState.ColReorder.length==this.s.dt.aoColumns.length&&(n=this.s.dt.oLoadedState.ColReorder),n)if(o.s.dt._bInitComplete)t=s(n),o._fnOrderColumns.call(o,t);else{var a=!1;this.s.dt.aoDrawCallback.push({fn:function(){if(!o.s.dt._bInitComplete&&!a){a=!0;var t=s(n);o._fnOrderColumns.call(o,t)}},sName:"ColReorder_Pre"})}},_fnOrderColumns:function(e){if(e.length!=this.s.dt.aoColumns.length)this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"ColReorder - array reorder does not match known number of columns. Skipping.");else{for(var o=0,s=e.length;s>o;o++){var a=t.inArray(o,e);o!=a&&(n(e,a,o),this.s.dt.oInstance.fnColReorder(a,o))}(""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY)&&this.s.dt.oInstance.fnAdjustColumnSizing(),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt)}},_fnStateSave:function(e){var o,s,n,a=this.s.dt;for(o=0;o<e.aaSorting.length;o++)e.aaSorting[o][0]=a.aoColumns[e.aaSorting[o][0]]._ColReorder_iOrigCol;for(aSearchCopy=t.extend(!0,[],e.aoSearchCols),e.ColReorder=[],o=0,s=a.aoColumns.length;s>o;o++)n=a.aoColumns[o]._ColReorder_iOrigCol,e.aoSearchCols[n]=aSearchCopy[o],e.abVisCols[n]=a.aoColumns[o].bVisible,e.ColReorder.push(n)},_fnMouseListener:function(e,o){var s=this;t(o).bind("mousedown.ColReorder",function(t){t.preventDefault(),s._fnMouseDown.call(s,t,o)})},_fnMouseDown:function(e,s){var n=this,a=this.s.dt.aoColumns,i="TH"==e.target.nodeName?e.target:t(e.target).parents("TH")[0],i=t(i).offset();this.s.mouse.startX=e.pageX,this.s.mouse.startY=e.pageY,this.s.mouse.offsetX=e.pageX-i.left,this.s.mouse.offsetY=e.pageY-i.top,this.s.mouse.target=s,this.s.mouse.targetIndex=t("th",s.parentNode).index(s),this.s.mouse.fromIndex=this.s.dt.oInstance.oApi._fnVisibleToColumnIndex(this.s.dt,this.s.mouse.targetIndex),this.s.aoTargets.splice(0,this.s.aoTargets.length),this.s.aoTargets.push({x:t(this.s.dt.nTable).offset().left,to:0});for(var r=i=0,d=a.length;d>r;r++)r!=this.s.mouse.fromIndex&&i++,a[r].bVisible&&this.s.aoTargets.push({x:t(a[r].nTh).offset().left+t(a[r].nTh).outerWidth(),to:i});0!==this.s.fixed&&this.s.aoTargets.splice(0,this.s.fixed),t(o).bind("mousemove.ColReorder",function(t){n._fnMouseMove.call(n,t)}),t(o).bind("mouseup.ColReorder",function(t){n._fnMouseUp.call(n,t)})},_fnMouseMove:function(t){if(null===this.dom.drag){if(5>Math.pow(Math.pow(t.pageX-this.s.mouse.startX,2)+Math.pow(t.pageY-this.s.mouse.startY,2),.5))return;this._fnCreateDragNode()}this.dom.drag.style.left=t.pageX-this.s.mouse.offsetX+"px",this.dom.drag.style.top=t.pageY-this.s.mouse.offsetY+"px";for(var e=!1,o=1,s=this.s.aoTargets.length;s>o;o++)if(t.pageX<this.s.aoTargets[o-1].x+(this.s.aoTargets[o].x-this.s.aoTargets[o-1].x)/2){this.dom.pointer.style.left=this.s.aoTargets[o-1].x+"px",this.s.mouse.toIndex=this.s.aoTargets[o-1].to,e=!0;break}e||(this.dom.pointer.style.left=this.s.aoTargets[this.s.aoTargets.length-1].x+"px",this.s.mouse.toIndex=this.s.aoTargets[this.s.aoTargets.length-1].to)},_fnMouseUp:function(){t(o).unbind("mousemove.ColReorder"),t(o).unbind("mouseup.ColReorder"),null!==this.dom.drag&&(o.body.removeChild(this.dom.drag),o.body.removeChild(this.dom.pointer),this.dom.drag=null,this.dom.pointer=null,this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex),(""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY)&&this.s.dt.oInstance.fnAdjustColumnSizing(),null!==this.s.dropCallback&&this.s.dropCallback.call(this),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt))},_fnCreateDragNode:function(){var e=this;for(this.dom.drag=t(this.s.dt.nTHead.parentNode).clone(!0)[0],this.dom.drag.className+=" DTCR_clonedTable";0<this.dom.drag.getElementsByTagName("caption").length;)this.dom.drag.removeChild(this.dom.drag.getElementsByTagName("caption")[0]);for(;0<this.dom.drag.getElementsByTagName("tbody").length;)this.dom.drag.removeChild(this.dom.drag.getElementsByTagName("tbody")[0]);for(;0<this.dom.drag.getElementsByTagName("tfoot").length;)this.dom.drag.removeChild(this.dom.drag.getElementsByTagName("tfoot")[0]);t("thead tr:eq(0)",this.dom.drag).each(function(){t("th",this).eq(e.s.mouse.targetIndex).siblings().remove()}),t("tr",this.dom.drag).height(t("tr:eq(0)",e.s.dt.nTHead).height()),t("thead tr:gt(0)",this.dom.drag).remove(),t("thead th:eq(0)",this.dom.drag).each(function(){this.style.width=t("th:eq("+e.s.mouse.targetIndex+")",e.s.dt.nTHead).width()+"px"}),this.dom.drag.style.position="absolute",this.dom.drag.style.top="0px",this.dom.drag.style.left="0px",this.dom.drag.style.width=t("th:eq("+e.s.mouse.targetIndex+")",e.s.dt.nTHead).outerWidth()+"px",this.dom.pointer=o.createElement("div"),this.dom.pointer.className="DTCR_pointer",this.dom.pointer.style.position="absolute",""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY?(this.dom.pointer.style.top=t(this.s.dt.nTable).offset().top+"px",this.dom.pointer.style.height=t(this.s.dt.nTable).height()+"px"):(this.dom.pointer.style.top=t("div.dataTables_scroll",this.s.dt.nTableWrapper).offset().top+"px",this.dom.pointer.style.height=t("div.dataTables_scroll",this.s.dt.nTableWrapper).height()+"px"),o.body.appendChild(this.dom.pointer),o.body.appendChild(this.dom.drag)},_fnDestroy:function(){for(var e=0,o=ColReorder.aoInstances.length;o>e;e++)if(ColReorder.aoInstances[e]===this){ColReorder.aoInstances.splice(e,1);break}t(this.s.dt.nTHead).find("*").unbind(".ColReorder"),this.s=this.s.dt.oInstance._oPluginColReorder=null}},ColReorder.aoInstances=[],ColReorder.fnReset=function(t){for(var e=0,o=ColReorder.aoInstances.length;o>e;e++)ColReorder.aoInstances[e].s.dt.oInstance==t&&ColReorder.aoInstances[e].fnReset()},ColReorder.prototype.CLASS="ColReorder",ColReorder.VERSION="1.0.8",ColReorder.prototype.VERSION=ColReorder.VERSION,"function"==typeof t.fn.dataTable&&"function"==typeof t.fn.dataTableExt.fnVersionCheck&&t.fn.dataTableExt.fnVersionCheck("1.9.3")?t.fn.dataTableExt.aoFeatures.push({fnInit:function(t){var e=t.oInstance;return"undefined"==typeof e._oPluginColReorder?e._oPluginColReorder=new ColReorder(t,"undefined"!=typeof t.oInit.oColReorder?t.oInit.oColReorder:{}):e.oApi._fnLog(t,1,"ColReorder attempted to initialise twice. Ignoring second"),null},cFeature:"R",sFeature:"ColReorder"}):alert("Warning: ColReorder requires DataTables 1.9.3 or greater - www.datatables.net/download")}(jQuery,window,document);