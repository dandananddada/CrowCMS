!function(t){t.fn.extend({maxlength:function(e,a){function s(t){var e=t.val().match(/\n/g),e=e?e.length:0;return t.val().length+e}function o(t,a){var o="";return e.preText&&(o+=e.preText),o=e.showCharsTyped?o+a:o+(t-s(a)),e.showMaxLength&&(o+=e.separator+t),e.postText&&(o+=e.postText),o}function i(t,a,i,n){if(n.html(o(i,i-t)),t>0){t=e.threshold;var l=!0;!e.alwaysShow&&i-s(a)>t&&(l=!1),l?n.removeClass(e.limitReachedClass).addClass(e.warningClass).css({display:"block"}):n.css({display:"none"})}else n.removeClass(e.warningClass).addClass(e.limitReachedClass).css({display:"block"})}function n(a,s){var o;o=a[0],o=t.extend({},"function"==typeof o.getBoundingClientRect?o.getBoundingClientRect():{width:o.offsetWidth,height:o.offsetHeight},a.offset());var i=a.outerWidth(),n=s.outerWidth(),l=s.width(),h=s.height();switch(e.placement){case"bottom":s.css({top:o.top+o.height,left:o.left+o.width/2-l/2});break;case"top":s.css({top:o.top-h,left:o.left+o.width/2-l/2});break;case"left":s.css({top:o.top+o.height/2-h/2,left:o.left-l});break;case"right":s.css({top:o.top+o.height/2-h/2,left:o.left+o.width});break;case"bottom-right":s.css({top:o.top+o.height,left:o.left+o.width});break;case"top-right":s.css({top:o.top-h,left:o.left+i});break;case"top-left":s.css({top:o.top-h,left:o.left-n});break;case"bottom-left":s.css({top:o.top+a.outerHeight(),left:o.left-n});break;case"centered-right":s.css({top:o.top+h/2,left:o.left+i-n-3})}}function l(t){return t.attr("maxlength")||t.attr("size")}var h=t("body");return t.isFunction(e)&&!a&&(a=e,e={}),e=t.extend({alwaysShow:!1,threshold:10,warningClass:"label label-success",limitReachedClass:"label label-important",separator:" / ",preText:"",postText:"",showMaxLength:!0,placement:"bottom",showCharsTyped:!0,validate:!1},e),this.each(function(){var a=t(this),r=l(a),c=t("<span></span>").css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:50}).html(o(r,"0"));a.is("textarea")&&(a.data("maxlenghtsizex",a.outerWidth()),a.data("maxlenghtsizey",a.outerHeight()),a.mouseup(function(){a.outerWidth()===a.data("maxlenghtsizex")&&a.outerHeight()===a.data("maxlenghtsizey")||n(a,c),a.data("maxlenghtsizex",a.outerWidth()),a.data("maxlenghtsizey",a.outerHeight())})),h.append(c),a.focus(function(){var t;t=l(a)-s(a),i(t,a,r,c),n(a,c)}),t(window).resize(function(){n(a,c)}),a.blur(function(){c.css("display","none")}),a.keyup(function(t){var o;o=l(a)-s(a);var n=!0,h=t.keyCode||t.which;return 0!==o||9!==h||t.shiftKey||a.attr("maxlength",l(a)+1).trigger({type:"keypress",which:9}).attr("maxlength",l(a)-1),e.validate&&0>o?n=!1:i(o,a,r,c),n})})}})}(jQuery);