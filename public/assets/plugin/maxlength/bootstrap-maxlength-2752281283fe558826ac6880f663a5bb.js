!function(t){"use strict";t.fn.extend({maxlength:function(e,a){function s(t){var a=t.val(),s=a.match(/\n/g),n=0,o=0;return e.utf8?(n=s?getUTF8Length(s):0,o=getUTF8Length(t.val())+n):(n=s?s.length:0,o=t.val().length+n),o}function n(t,a,n){var o=!0;return!e.alwaysShow&&n-s(t)>a&&(o=!1),o}function o(t,e){var a=e-s(t);return a}function i(t){t.css({display:"block"})}function r(t){t.css({display:"none"})}function h(t,a){var s="";return e.message?s=e.message.replace("%charsTyped%",a).replace("%charsRemaining%",t-a).replace("%charsTotal%",t):(e.preText&&(s+=e.preText),s+=e.showCharsTyped?a:t-a,e.showMaxLength&&(s+=e.separator+t),e.postText&&(s+=e.postText)),s}function l(t,a,s,o){o.html(h(s,s-t)),t>0?n(a,e.threshold,s)?i(o.removeClass(e.limitReachedClass).addClass(e.warningClass)):r(o):i(o.removeClass(e.warningClass).addClass(e.limitReachedClass))}function c(e){var a=e[0];return t.extend({},"function"==typeof a.getBoundingClientRect?a.getBoundingClientRect():{width:a.offsetWidth,height:a.offsetHeight},e.offset())}function p(t,a){var s=c(t),n=t.outerWidth(),o=a.outerWidth(),i=a.width(),r=a.height();switch(e.placement){case"bottom":a.css({top:s.top+s.height,left:s.left+s.width/2-i/2});break;case"top":a.css({top:s.top-r,left:s.left+s.width/2-i/2});break;case"left":a.css({top:s.top+s.height/2-r/2,left:s.left-i});break;case"right":a.css({top:s.top+s.height/2-r/2,left:s.left+s.width});break;case"bottom-right":a.css({top:s.top+s.height,left:s.left+s.width});break;case"top-right":a.css({top:s.top-r,left:s.left+n});break;case"top-left":a.css({top:s.top-r,left:s.left-o});break;case"bottom-left":a.css({top:s.top+t.outerHeight(),left:s.left-o});break;case"centered-right":a.css({top:s.top+r/2,left:s.left+n-o-3})}}function f(t){return t.attr("maxlength")||t.attr("size")}var u=t("body"),d={alwaysShow:!1,threshold:10,warningClass:"label label-success",limitReachedClass:"label label-important",separator:" / ",preText:"",postText:"",showMaxLength:!0,placement:"bottom",showCharsTyped:!0,validate:!1,utf8:!1};return t.isFunction(e)&&!a&&(a=e,e={}),e=t.extend(d,e),this.each(function(){var a=t(this),s=f(a),n=t("<span></span>").css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:50}).html(h(s,"0"));a.is("textarea")&&(a.data("maxlenghtsizex",a.outerWidth()),a.data("maxlenghtsizey",a.outerHeight()),a.mouseup(function(){(a.outerWidth()!==a.data("maxlenghtsizex")||a.outerHeight()!==a.data("maxlenghtsizey"))&&p(a,n),a.data("maxlenghtsizex",a.outerWidth()),a.data("maxlenghtsizey",a.outerHeight())})),u.append(n),a.focus(function(){var t=o(a,f(a));l(t,a,s,n),p(a,n)}),t(window).resize(function(){p(a,n)}),a.blur(function(){n.css("display","none")}),a.keyup(function(t){var i=o(a,f(a)),r=!0,h=t.keyCode||t.which;return 0!==i||9!==h||t.shiftKey||a.attr("maxlength",f(a)+1).trigger({type:"keypress",which:9}).attr("maxlength",f(a)-1),e.validate&&0>i?r=!1:l(i,a,s,n),r})})}})}(jQuery);